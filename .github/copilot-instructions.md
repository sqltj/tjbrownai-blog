# Copilot Instructions for TJ Brown's Tech Blog

## Project Overview

This is a personal tech blog built with **Hugo** (static site generator) and the **Toha theme**. The site is deployed to GitHub Pages via automated GitHub Actions workflows triggered on pushes to the `main` branch.

- **Live Site**: https://tjbrown.ai
- **Repository**: https://github.com/sqltj/tjbrownai-blog
- **Theme**: Toha (submoduled from https://github.com/hugo-toha/toha)
- **Hugo Version**: 0.155.3 (see `.github/workflows/hugo.yaml`)

## Architecture

### Directory Structure

- **`/content/posts/`** - Blog post markdown files. Each post is a `.md` file with YAML front matter.
- **`/config/_default/`** - Hugo configuration files (site settings, params, menus, languages)
- **`/themes/toha/`** - Toha theme (submodule). Contains templates, theme defaults, and styling.
- **`/assets/`** - CSS/SCSS assets processed by Hugo's asset pipeline.
- **`/static/`** - Static files (images, fonts) served as-is to the `public/` output.
- **`/layouts/`** - Custom Hugo layout overrides (if any exist, they take precedence over theme layouts).
- **`/data/`** - Data files (YAML/JSON) used in templates.
- **`/public/`** - Build output directory (generated by `hugo` command, deployed to GitHub Pages).

### Hugo Configuration

- **Primary Config**: `hugo.yaml` in the repository root
- **Feature Configuration**: `config/_default/params.toml` controls theme features (blog, tags, TOC, dark mode, etc.)
- **Navigation**: `config/_default/menus.en.toml`
- **Author Info**: `config/_default/languages.en.toml`

Key settings:
- Raw HTML rendering enabled in markdown (`markup.goldmark.renderer.unsafe: true`)
- Dark mode is the default for the high-tech aesthetic
- Blog posts, tags, and copy-code buttons are all enabled

## Build, Test & Deployment

### Local Development

```bash
# Start local dev server with live reloading (default port 1313)
hugo server
```

The site will be available at `http://localhost:1313`.

### Production Build

```bash
# Generate static site with minification and garbage collection
hugo --gc --minify
```

Output goes to `/public/` directory, which is what gets deployed to GitHub Pages.

### Dependencies

- **Hugo CLI** (v0.155.3) - Must be installed locally
- **Node.js dependencies** - Managed by `package.json`. Run `npm install` to install theme assets (fonts, icons, Bootstrap, etc.)
- **Dart Sass** - Required for compiling SCSS. Installed via snap in CI, or available via Homebrew locally

The CI workflow (`.github/workflows/hugo.yaml`) automates the full build and deployment process. No manual build steps needed for deployment—just push to `main`.

## Content Management

### Creating a New Blog Post

```bash
hugo new content posts/my-post-title.md
```

This uses the archetype in `/archetypes/default.md` to create a new post with basic front matter.

### Blog Post Front Matter

Each post must have YAML front matter at the top (see example in `/content/posts/future-of-ai.md`):

```yaml
---
title: "Post Title"
date: 2026-02-11T12:00:00Z
description: "Brief summary for metadata and preview."
tags: ["Tag1", "Tag2"]
categories: ["Category1"]
draft: false  # Set to true to hide post in production
---
```

### Images

Two approaches:

1. **Static folder method**: Place images in `/static/img/` and reference as `![alt](/img/filename.png)`
2. **Page bundles**: Create a folder for your post with the image inside; Hugo automatically bundles them together

## Key Conventions

### Hugo/Toha-Specific

- Post URLs are generated from the file path, e.g., `content/posts/my-post.md` → `/posts/my-post/`
- Markdown uses goldmark renderer with unsafe HTML enabled (allows raw HTML in posts if needed)
- The Toha theme uses Bootstrap for styling and FontAwesome icons via `@fortawesome/fontawesome-free` npm package
- Live reload during `hugo server` happens automatically; no manual refresh needed

### Git Workflow

- All deployments are automated via `.github/workflows/hugo.yaml`
- Pushes to `main` branch trigger a full build and deployment to GitHub Pages
- No need to commit the `/public/` directory—it's generated fresh on each deploy

#### Branch & PR Workflow (REQUIRED for ALL changes)

**All new work must use feature branches and pull requests.** See `CLAUDE.md` for detailed conventions, but the key rules are:

1. **Never commit directly to `main`** — Always create a feature branch
2. **Feature branch naming:**
   - Blog posts: `feature/blog-post-NN-descriptive-title` (e.g., `feature/blog-post-01-metric-views-intro`)
   - Features: `feature/add-x-feature`
   - Fixes: `fix/description`
   - Docs: `feature/docs-description`
   - **Everything goes through this workflow—no exceptions**
3. **Submit PRs for review** before merging to main
4. **Merge via GitHub PR**, not local `git merge`

Example:
```bash
git checkout -b feature/blog-post-01-intro
# ... make changes ...
git commit -m "feat: add blog post 01 - Introduction"
git push -u origin feature/blog-post-01-intro
# Then open PR on GitHub for review and merge
```

See `CLAUDE.md` for the full workflow documentation.

### Theme Submodule

The Toha theme is a Git submodule. When cloning:

```bash
git clone --recurse-submodules https://github.com/sqltj/tjbrownai-blog.git
```

Or after cloning:

```bash
git submodule update --init --recursive
```

## Customization Points

- **Theme overrides**: Create custom layouts in `/layouts/` to override theme defaults
- **Custom CSS**: Add SCSS files to `/assets/` (Hugo's asset pipeline will process them)
- **Data-driven content**: Use files in `/data/` for structured content (YAML/JSON)
- **Theme configuration**: All feature toggles and visual settings are in `config/_default/params.toml`

Refer to [Toha Theme Documentation](https://toha-docs.netlify.app/posts/) for advanced theme features.
